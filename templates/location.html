<!DOCTYPE html>
<html>
<head>
    <title>Location Page</title>
</head>
<body>
    <button onclick="sendLocation()">Get Location</button>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function sendLocation() {
            navigator.geolocation.getCurrentPosition(function(position) {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                
                $.ajax({
                    url: '/api/location/',
                    method: 'GET',
                    data: {
                        latitude: latitude,
                        longitude: longitude
                    },
                    success: function(response) {
                        console.log(response.message);
                        // Handle the response as needed
                    },
                    error: function(error) {
                        console.log('Error:', error);
                        // Handle the error
                    }
                });
            });
        }
        function getCity(coordinates) {
            var xhr = new XMLHttpRequest();
            var lat = coordinates[0];
            var lng = coordinates[1];
          
            // Paste your LocationIQ token below.
            xhr.open('GET', "
        https://us1.locationiq.com/v1/reverse.php?key=YOUR_PRIVATE_TOKEN&lat=" +
            lat + "&lon=" + lng + "&format=json", true);
            xhr.send();
            xhr.onreadystatechange = processRequest;
            xhr.addEventListener("readystatechange", processRequest, false);
          
            function processRequest(e) {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var response = JSON.parse(xhr.responseText);
                    var city = response.address.city;
                    console.log(city);
                    return;
                }
            }
        }
          
    </script>
</body>
</html>
